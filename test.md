[Testing, Oh my!](https://jwchung.github.io/testing-oh-my)

```
테스트에 어려움을 느끼는 초심자의 큰 오해 중 하나는, 그 어려움이 테스트 스킬 부족 때문이라고 생각하는 것이다. 테스트 스킬이 중요하지 않은 것은 아니지만, 그보다 SUT가 얼마나 테스트하기 쉽게 디자인되었는지가 더 중요한 요소이다. 후배의 예처럼 IO 로직 같은 테스트하기 어려운 코드를 직접 참조해버리면 아무리 뛰어난 스킬이 있더라도 손과 눈으로 수동테스트하는 방법밖엔 없는 것이다.
```

### 테스트 하기 어려운 코드

1. 테스트 코드의 구동이 가능하려면 같은 입력 값에 항상 같은 결과를 반환해야한다. ex : (Date.now()) 는 실행하는 시간에 따라 결과가 달라진다.
2. 메일 발송, 파일 수정, 데이터베이스에 기록 등은 외부 세상에 변경을 가하지만 리턴 값을 가지지 않는다.
3. 리턴이 없는 void() 함수

### 테스트 하기 쉬운 코드

1. 외부 세상과 소통이 없는 로직.

- 예를 들어 회원가입을 하는 로직이라면 이메일 유효성 검사, 비밀번호 유효성 검사 등등은 함수 하나로, 실제 데이터베이스를 참조하는 중복 이메일 검사, 데이터베이스에 유저 insert는 또다른 함수로 구현할 수 있을 것이다.
- 중요한건 테스트 난이도가 쉬운 코드를 따로 빼주는 것.

### 테스트를 할 수 없는 코드

- 테스트를 하지 말아야 한다는 생각.
  - 물론 테스트를 하지 않는것이 아니다. 무조건 코드를 작성해 자동화하려고 하는게 아닌 손과 눈으로 확인하는 수동테스트를 진행하는 방법을 배제하지는 말라는 것.
- 하지만 테스트를 할 수 없는 코드는 최대한 겸손하게 작성할 것.
  - 최대한 테스트가 필요없을 만큼 단순해야 한다는 것.

[향로님의 테스트 코드에서 내부 구현 검증 피하기](https://jojoldu.tistory.com/614)

- 테스트 코드를 작성하고 운영하다 보면 기존 코드가 조금만 변경되어도 테스트를 다 고쳐야 하는 경우가 발생한다.
  <br> => 기능의 최종 결과를 검증하는게 아니라 내부 구현을 검증하는 경우에 자주 발생한다.

내부 구현은 언제든지 바뀔 수 있기 때문에 테스트 코드는 내부 구현보다 최종 결과를 검증해야 한다.

---

위의 래퍼런스들을 참조했을 때 중요한 점은 하나 뽑으라면 다음과 같다.

```
테스트를 하기 좋은 코드를 만들어라. == 외부 의존성을 로직에서 떨어뜨려라.
```
